import{_,o as g,c as y,d as M,g as b,E as w,u as C,h as k,i as x,j as S,k as V,r as p,l as I,m as H,e as u,w as h,b as d,F as P,M as m,n as W,p as c,q as B}from"./index.78d68e98.js";const E={name:"SIdentify",props:{code:{type:String,default:"1234"},fontSizeMin:{type:Number,default:30},fontSizeMax:{type:Number,default:35},backgroundColorMin:{type:Number,default:100},backgroundColorMax:{type:Number,default:150},colorMin:{type:Number,default:0},colorMax:{type:Number,default:10},lineColorMin:{type:Number,default:100},lineColorMax:{type:Number,default:180},dotColorMin:{type:Number,default:100},dotColorMax:{type:Number,default:255},contentWidth:{type:Number,default:112},contentHeight:{type:Number,default:38}},methods:{randomNum(e,t){return Math.floor(Math.random()*(t-e)+e)},randomColor(e,t){var o=this.randomNum(e,t),n=this.randomNum(e,t),r=this.randomNum(e,t);return"rgb("+o+","+n+","+r+")"},drawPic(){var e=document.getElementById("s-canvas"),t=e.getContext("2d");t.textBaseline="bottom",t.fillStyle=this.randomColor(this.backgroundColorMin,this.backgroundColorMax),t.fillRect(0,0,this.contentWidth,this.contentHeight);for(let o=0;o<this.code.length;o++)this.drawText(t,this.code[o],o);this.drawLine(t),this.drawDot(t)},drawText(e,t,o){e.fillStyle=this.randomColor(this.colorMin,this.colorMax),e.font=this.randomNum(this.fontSizeMin,this.fontSizeMax)+"px SimHei";var n=(o+1)*(this.contentWidth/(this.code.length+1)),r=this.randomNum(this.fontSizeMax,this.contentHeight-5),s=this.randomNum(-30,30);e.save(),e.translate(n,r),e.rotate(s*Math.PI/180),e.fillText(t,0,0),e.restore()},drawLine(e){for(let t=0;t<8;t++)e.strokeStyle=this.randomColor(this.lineColorMin,this.lineColorMax),e.beginPath(),e.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.stroke()},drawDot(e){for(let t=0;t<100;t++)e.fillStyle=this.randomColor(0,255),e.beginPath(),e.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),e.fill()}},watch:{code(){this.drawPic()}},mounted(){this.drawPic()}},T={class:"s-canvas"},z=["width","height"];function $(e,t,o,n,r,s){return g(),y("div",T,[M("canvas",{id:"s-canvas",width:o.contentWidth,height:o.contentHeight},null,8,z)])}const L=_(E,[["render",$]]);const R=c("\u8D26\u53F7:"),U=c("\u5BC6\u7801:"),j=c("\u9A8C\u8BC1\u7801:"),D=c("\u767B\u5F55"),F={__name:"login",setup(e){b(()=>w("\u6B22\u8FCE"));let t=C();k(),x(),S("url");let o=V({}),n=p(""),r=p("abcde1323");s();function s(){n.value="";for(let a=0;a<4;a++)n.value+=r.value[Math.floor(Math.random()*r.value.length)]}function N(){if(!o.userName||!o.password||!o.verify)return s(),m("\u8BF7\u8F93\u5165\u5B8C\u6574");if(n.value!=o.verify)return s(),m("\u9A8C\u8BC1\u7801\u6709\u8BEF");W(B)({url:"/login",method:"post",data:o}).then(a=>{if(console.log("axios\u8FD4\u56DE",a.data),a.data.errcode==0)return t.login=!0,t.user.userName=o.userName,t.user.role=a.data.data.role,a.data.data.networkId&&(t.user.networkId=a.data.data.networkId),t.data=a.data.data,t.token=a.data.data.token,m("\u767B\u5F55\u6210\u529F","success");m(a.data.errmsg)})}return(a,i)=>{const f=I,v=H;return g(),y(P,null,[u(f,{modelValue:d(o).userName,"onUpdate:modelValue":i[0]||(i[0]=l=>d(o).userName=l),placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7"},{prepend:h(()=>[R]),_:1},8,["modelValue"]),u(f,{modelValue:d(o).password,"onUpdate:modelValue":i[1]||(i[1]=l=>d(o).password=l),type:"password","show.value-password":"",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},{prepend:h(()=>[U]),_:1},8,["modelValue"]),u(f,{modelValue:d(o).verify,"onUpdate:modelValue":i[2]||(i[2]=l=>d(o).verify=l),placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",style:{flex:"1 0 50%"}},{prepend:h(()=>[j]),_:1},8,["modelValue"]),u(L,{code:d(n),onClick:s},null,8,["code"]),u(v,{type:"success",plain:"",onClick:N},{default:h(()=>[D]),_:1})],64)}}},A=_(F,[["__scopeId","data-v-0d19cc24"]]);export{A as default};
